<div class="container">
    <div class="position-relative">
        <h2>Add Product</h2>
        <div *ngIf="loading" class="loader-overlay">
            <img src="assets/loaderImage.gif" class="loader-overlay" alt="loading" />
        </div>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form #productForm="ngForm" (ngSubmit)="onSubmit(productForm)" novalidate>
                    <div class="mb-3">
                        <label for="productName" class="form-label">Product Name:</label>
                        <input type="text" class="form-control" id="productName" name="productName"
                            [(ngModel)]="product.productName" required minlength="2">
                        <div
                            *ngIf="productForm.controls['productName']?.invalid && productForm.controls['productName']?.touched">
                            <small class="text-danger"
                                *ngIf="productForm.controls['productName']?.errors?.['required']">Product name is
                                required.</small>
                            <small class="text-danger"
                                *ngIf="productForm.controls['productName']?.errors?.['minlength']">Product name must be
                                at least 2 characters long.</small>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="productDescription" class="form-label">Product Description:</label>
                        <textarea class="form-control" id="productDescription" name="productDescription"
                            [(ngModel)]="product.productDescription" required minlength="5"></textarea>
                        <div
                            *ngIf="productForm.controls['productDescription']?.invalid && productForm.controls['productDescription']?.touched">
                            <small class="text-danger"
                                *ngIf="productForm.controls['productDescription']?.errors?.['required']">Product
                                description is required.</small>
                            <small class="text-danger"
                                *ngIf="productForm.controls['productDescription']?.errors?.['minlength']">Product
                                description must be at least 5 characters long.</small>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="categoryId" class="form-label">Category:</label>
                        <select class="form-control" id="categoryId" name="categoryId" [(ngModel)]="product.categoryId"
                            required>
                            <option value="">--Select--</option>
                            <option *ngFor="let category of categories" [value]="category.categoryId">{{
                                category.categoryName }}</option>
                        </select>
                        <div
                            *ngIf="productForm.controls['categoryId']?.invalid && productForm.controls['categoryId']?.touched">
                            <small class="text-danger"
                                *ngIf="productForm.controls['categoryId']?.errors?.['required']">Category is
                                required.</small>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="productPrice" class="form-label">Product Price:</label>
                        <input type="number" class="form-control" id="productPrice" name="productPrice"
                            [(ngModel)]="product.productPrice" required min="0.01">
                        <div
                            *ngIf="productForm.controls['productPrice']?.invalid && productForm.controls['productPrice']?.touched">
                            <small class="text-danger"
                                *ngIf="productForm.controls['productPrice']?.errors?.['required']">Product price is
                                required.</small>
                            <small class="text-danger"
                                *ngIf="productForm.controls['productPrice']?.errors?.['min']">Product price must be
                                greater than 0.</small>
                        </div>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="inStock" name="inStock"
                            [(ngModel)]="product.inStock">
                        <label for="inStock" class="form-check-label">In Stock</label>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="isActive" name="isActive"
                            [(ngModel)]="product.isActive">
                        <label for="isActive" class="form-check-label">Active</label>
                    </div>
                    <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">Add Product</button>
                    <a [routerLink]="['/products']" routerLinkActive="router-link-active">Back to List</a> 
                </form>
            </div>
        </div>
    </div>
</div>